{% extends 'base.html' %}

{% block content %}

<style type="text/css">
	
	.sub-topic-card{
		
		color: white; 
		border: 2px solid white;
		border-radius: 10px;
		margin: 20px;
		text-align: center;
		align-items: center;
		padding: 10px;
		font-size: 20px;
	}

	.sub-topic-card:hover{
		background-color: rgba(225, 225 , 225 , 0.3);
	}

	.sub-topic-description{
		flex: 1;
		width: 100%; 
		color: white; 
		align-items: center;
		padding: 10px;
		font-size: 20px;	
		font-size: 16px;
		line-height: 1.5;       
		word-spacing: 0.3em;    
		letter-spacing: 0.02em;
		overflow: auto;
	}

	.sub-topic-description::-webkit-scrollbar {
	  width: 7px;
	  margin-right: 3px;
	}

	.sub-topic-description::-webkit-scrollbar-track {
	  background: #f1f1f1;
	  border-radius: 10px;
	}

	.sub-topic-description::-webkit-scrollbar-thumb {
	  background: #888;   
	  border-radius: 10px;
	}

	.sub-topic-description::-webkit-scrollbar-thumb:hover {
	  background: #555;  
	}

</style>

<div class='primary-container' data-value="{{id}}" style=" height: 100vh; width: 100vw; display: flex;">
	<div class="container1" style=" height: 100vh; width: 25vw; display: flex; flex-direction: column;">
		<b><h4 class="topic" style="color: white; margin-top: 20px; text-align:center; "></h4></b>
		<div class="sub-topic-box" style="flex:1 ; width: 100%; overflow: scroll; scrollbar-width: none; display: flex; flex-direction: column; ">

		<!-- <div class = "sub-topic-card"> TOPIC 1 </div> -->

		</div>
	</div>
	<div class="container2" style="height: 100vh; width: 75vw; display: flex; flex-direction: column; ">
		<b><h4 class="sub-topic" style="color: white; margin-top: 20px; text-align:center; "></h4></b>
		<div class="sub-topic-description" style=" ">

		</div>
	</div>
</div>

<script type="text/javascript">

	let topic = document.querySelector(".topic")
	let subTopicBox = document.querySelector(".sub-topic-box")
	let subTopicCard = document.querySelector(".sub-topic-card")
	let subTopic = document.querySelector(".sub-topic")
	let subTopicDescription = document.querySelector(".sub-topic-description")
	let primaryContainer = document.querySelector(".primary-container")
	let TopicData = {};


	fetch(`http://127.0.0.1:8000/extracted-data/${primaryContainer.dataset.value}`)
    .then(response=>{
    	return response.json()
    })
    .then(data=>{
    	console.log(data)
    	TopicData = data; 
    	topic.innerText = data.topic

    	for(i =0 ; i<data.important_topics.length; i++){
    		subTopicBox.innerHTML += `
				<div class = "sub-topic-card" data-value = "${i}" > ${data.important_topics[i].name} </div>    		
    		`
    	}

    })
    .catch(error =>{
    	console.log(error)
    })

    subTopicBox.addEventListener("click",e=>{
    	if (e.target.dataset.value !== undefined){
    		console.log(e.target.dataset.value)	
	    	subTopic.innerText = TopicData.important_topics[e.target.dataset.value].name
	    	subTopicDescription.innerText = TopicData.important_topics[e.target.dataset.value].description	
    	}
    })
</script>

{% endblock %}